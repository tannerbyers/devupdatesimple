{"ast":null,"code":"import _slicedToArray from\"/Users/tbyers/fun/devupdatesimple/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _asyncToGenerator from\"/Users/tbyers/fun/devupdatesimple/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/Users/tbyers/fun/devupdatesimple/client/node_modules/@babel/runtime/regenerator/index.js\";import React,{useEffect,useState}from\"react\";import{useTheme}from\"@mui/material/styles\";import Box from\"@mui/material/Box\";import Card from\"@mui/material/Card\";import CardContent from\"@mui/material/CardContent\";import CardMedia from\"@mui/material/CardMedia\";import Typography from\"@mui/material/Typography\";import Button from\"@mui/material/Button\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var getUserTweets=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,body;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/api/recent_twitter_posts\");case 2:response=_context.sent;_context.next=5;return response.json();case 5:body=_context.sent;if(!(response.status!==200)){_context.next=8;break;}throw Error(body.message);case 8:return _context.abrupt(\"return\",body);case 9:case\"end\":return _context.stop();}}},_callee);}));return function getUserTweets(){return _ref.apply(this,arguments);};}();var getMediaUrl=function getMediaUrl(tweetMediaGiven,attachments){for(var i=0;i<tweetMediaGiven.length;i++){if(tweetMediaGiven[i].media_key==attachments.media_keys[0]){console.log(\"image found\");console.log(tweetMediaGiven[i]);console.log(tweetMediaGiven[i].preview_image_url);return tweetMediaGiven[i].preview_image_url||tweetMediaGiven[i].url;}}};var TwitterFeed=function TwitterFeed(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),tweets=_useState2[0],setTweets=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),tweetMedia=_useState4[0],setTweetMedia=_useState4[1];var theme=useTheme();useEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var tweetResponse;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getUserTweets();case 2:tweetResponse=_context2.sent;console.log(tweetResponse.includes.media);setTweets(tweetResponse.data);setTweetMedia(tweetResponse.includes.media);case 6:case\"end\":return _context2.stop();}}},_callee2);})),[]);return/*#__PURE__*/_jsx(_Fragment,{children:tweets&&tweets.map(function(tweet){return/*#__PURE__*/_jsxs(Card,{sx:{display:\"flex\"},children:[/*#__PURE__*/_jsx(Box,{sx:{display:\"flex\",flexDirection:\"column\",paddingRight:\"2%\"},children:/*#__PURE__*/_jsxs(CardContent,{sx:{flex:\"1 0 auto\"},children:[/*#__PURE__*/_jsx(Typography,{component:\"div\",variant:\"p\",children:tweet.text}),/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",color:\"text.secondary\",component:\"div\",children:tweet.id})]})}),tweet.attachments&&/*#__PURE__*/_jsx(Button,{onClick:function onClick(event){console.log(event);},children:/*#__PURE__*/_jsx(CardMedia,{component:\"img\",sx:{width:151},src:getMediaUrl(tweetMedia,tweet.attachments)})})]});})});};export default TwitterFeed;","map":{"version":3,"sources":["/Users/tbyers/fun/devupdatesimple/client/src/components/TwitterFeed.js"],"names":["React","useEffect","useState","useTheme","Box","Card","CardContent","CardMedia","Typography","Button","getUserTweets","fetch","response","json","body","status","Error","message","getMediaUrl","tweetMediaGiven","attachments","i","length","media_key","media_keys","console","log","preview_image_url","url","TwitterFeed","tweets","setTweets","tweetMedia","setTweetMedia","theme","tweetResponse","includes","media","data","map","tweet","display","flexDirection","paddingRight","flex","text","id","event","width"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useTheme } from \"@mui/material/styles\";\nimport Box from \"@mui/material/Box\";\nimport Card from \"@mui/material/Card\";\nimport CardContent from \"@mui/material/CardContent\";\nimport CardMedia from \"@mui/material/CardMedia\";\nimport Typography from \"@mui/material/Typography\";\nimport Button from \"@mui/material/Button\";\n\nconst getUserTweets = async () => {\n  const response = await fetch(\"/api/recent_twitter_posts\");\n  const body = await response.json();\n\n  if (response.status !== 200) {\n    throw Error(body.message);\n  }\n  return body;\n};\n\nconst getMediaUrl = (tweetMediaGiven, attachments) => {\n  for (let i = 0; i < tweetMediaGiven.length; i++) {\n    if (tweetMediaGiven[i].media_key == attachments.media_keys[0]) {\n      console.log(\"image found\");\n      console.log(tweetMediaGiven[i]);\n      console.log(tweetMediaGiven[i].preview_image_url);\n\n      return tweetMediaGiven[i].preview_image_url || tweetMediaGiven[i].url;\n    }\n  }\n};\n\nconst TwitterFeed = () => {\n  const [tweets, setTweets] = useState([]);\n  const [tweetMedia, setTweetMedia] = useState([]);\n  const theme = useTheme();\n\n  useEffect(async () => {\n    const tweetResponse = await getUserTweets();\n    console.log(tweetResponse.includes.media);\n\n    setTweets(tweetResponse.data);\n    setTweetMedia(tweetResponse.includes.media);\n  }, []);\n\n  return (\n    <>\n      {tweets &&\n        tweets.map((tweet) => (\n          <Card sx={{ display: \"flex\" }}>\n            <Box\n              sx={{\n                display: \"flex\",\n                flexDirection: \"column\",\n                paddingRight: \"2%\",\n              }}\n            >\n              <CardContent sx={{ flex: \"1 0 auto\" }}>\n                <Typography component=\"div\" variant=\"p\">\n                  {tweet.text}\n                </Typography>\n                <Typography\n                  variant=\"subtitle1\"\n                  color=\"text.secondary\"\n                  component=\"div\"\n                >\n                  {tweet.id}\n                </Typography>\n              </CardContent>\n            </Box>\n            {tweet.attachments && (\n              <Button\n                onClick={(event) => {\n                  console.log(event);\n                }}\n              >\n                <CardMedia\n                  component=\"img\"\n                  sx={{ width: 151 }}\n                  src={getMediaUrl(tweetMedia, tweet.attachments)}\n                />\n              </Button>\n            )}\n          </Card>\n        ))}\n    </>\n  );\n};\n\nexport default TwitterFeed;\n"]},"metadata":{},"sourceType":"module"}